<section class="view-section" id="story-home-view" :class="$root.skin">
    <header><span data-icon="tiny-back" @click="$router.replace({ name: 'story:welcome' })"></span>{{ story.name }}
    </header>

    <div class="general">

        <div class="info">
            <div class="advances">
                <div class="circle"><span class="circle-text">1/7</span></div>
                <span>Capítulos</span>
            </div>
            <div class="avatar">
                <img src="modules/story/images/navegante.png" alt="">
            </div>

            <span class="name">{{ $root.user.name }}</span>
            <span class="role">Eres navegante</span>
            <span class="city">Perteneces a cíbola</span>
        </div>

        <div class="complement">
            <div class="items">
                <section class="position">
                    <div class="icons">
                        <img src="modules/story/images/city.svg" alt="">
                    </div>
                    Ciudades
                </section>
                <section class="tools">
                    <div class="icons">
                        <img src="modules/story/images/tools-1.svg" alt="">
                        <img src="modules/story/images/tools-2.svg" alt="">
                        <img src="modules/story/images/tools-3.svg" alt="">
                    </div>
                    Herramientas
                </section>
            </div>

            <img src="modules/story/images/icono-pez.png" alt="">
        </div>
    </div>
    <div class="chapters" :style="{'--show-chapter':maxShow , '--width-chapter':widthChapter}">
        <div class="back">
            <span v-if="startShow != 0" @click="previousSlider">
                < </span>
        </div>
        <div class="slide-chapters">
            <div v-for="c,index in chaptersShow" class="chapter" @click="openActivity(c)">
                <div class="tittle">
                    {{c.title}}
                </div>
                <section class="content">
                    <div class="slide-advance">
                        <div class="progress-chapter" :style="{'--width-advance': (c.advance * 100 / c.total)+'%' }">
                            <div class="text-advance">
                                {{c.advance}}/{{c.total}}
                            </div>
                        </div>
                    </div>
                    <div class="summary">{{c.summary}}</div>
                </section>
            </div>
        </div>
        <div class="next">
            <span v-if="(maxShow + startShow) < chapters.length" @click="nextSlider">
                >
            </span>
        </div>
    </div>
    <div class="activities">
        <div class="header"> Tus actividades</div>
        <section>
            <div class="tabs">
                <ul>
                    <li :class="{'active': filterActivities === 'progress' }" @click="filterActivities = 'progress' ">En
                        curso</li>
                    <li :class="{'active': filterActivities === 'completed' }" @click="filterActivities = 'completed' ">
                        Completadas</li>
                </ul>
            </div>
            <div class="activities">
                <div class="activity progress" v-if="filterActivities === 'progress'">
                    <img src="modules/story/images/icon-lectura.png" alt="">
                    <div class="title">Lee el capitulo 2</div>
                    <div class="content">La Profecia se cumple</div>
                    <div class="date">Enviado hoy</div>
                </div>

                <div class="activity completed" v-if="filterActivities === 'completed'"
                    @click="$router.replace({ name: 'story:map' })">
                    <!--<img src="modules/story/images/icon-lectura.png" alt="">
                    <div class="title">Lee el capitulo 1</div>
                    <div class="content">La historia de los siete Sabios Portocalenses</div>
                    <div class="date">Enviado hace 8 días</div>-->
                    <div class="content">Ver mapa</div>
                </div>


            </div>
        </section>
    </div>

    <tour v-if="modal" @close="modal = false" selected="position" />

    <finish-modal v-if="finished" @close="finished = false" />
</section>